/*!
 * messenger
 * @version: 2.5.3
 * @license: Genesys Telecom Labs
 */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("__Messenger",[],t):"object"==typeof exports?exports.__Messenger=t():e.__Messenger=t()}("undefined"!=typeof self?self:this,(function(){return function(e){var t={};function n(u){if(t[u])return t[u].exports;var o=t[u]={i:u,l:!1,exports:{}};return e[u].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,u){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:u})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var u=Object.create(null);if(n.r(u),Object.defineProperty(u,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(u,o,function(t){return e[t]}.bind(null,o));return u},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=537)}({105:function(e,t,n){var u=n(106);e.exports=function(e,t){if(e){if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,t):void 0}},e.exports.__esModule=!0,e.exports.default=e.exports},106:function(e,t){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,u=new Array(t);n<t;n++)u[n]=e[n];return u},e.exports.__esModule=!0,e.exports.default=e.exports},11:function(e,t){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},e.exports.__esModule=!0,e.exports.default=e.exports},110:function(e,t){e.exports=function(e){if(Array.isArray(e))return e},e.exports.__esModule=!0,e.exports.default=e.exports},111:function(e,t){e.exports=function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var u,o,i=[],r=!0,D=!1;try{for(n=n.call(e);!(r=(u=n.next()).done)&&(i.push(u.value),!t||i.length!==t);r=!0);}catch(e){D=!0,o=e}finally{try{r||null==n.return||n.return()}finally{if(D)throw o}}return i}},e.exports.__esModule=!0,e.exports.default=e.exports},112:function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},14:function(e,t,n){"use strict";n.d(t,"z",(function(){return u})),n.d(t,"y",(function(){return o})),n.d(t,"I",(function(){return i})),n.d(t,"d",(function(){return r})),n.d(t,"c",(function(){return D})),n.d(t,"e",(function(){return s})),n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return c})),n.d(t,"n",(function(){return l})),n.d(t,"l",(function(){return d})),n.d(t,"L",(function(){return h})),n.d(t,"B",(function(){return f})),n.d(t,"C",(function(){return C})),n.d(t,"A",(function(){return p})),n.d(t,"K",(function(){return E})),n.d(t,"j",(function(){return g})),n.d(t,"i",(function(){return F})),n.d(t,"o",(function(){return v})),n.d(t,"E",(function(){return m})),n.d(t,"q",(function(){return b})),n.d(t,"O",(function(){return y})),n.d(t,"p",(function(){return A})),n.d(t,"P",(function(){return k})),n.d(t,"F",(function(){return S})),n.d(t,"M",(function(){return T})),n.d(t,"k",(function(){return R})),n.d(t,"m",(function(){return B})),n.d(t,"f",(function(){return w})),n.d(t,"r",(function(){return I})),n.d(t,"H",(function(){return O})),n.d(t,"u",(function(){return x})),n.d(t,"t",(function(){return M})),n.d(t,"Q",(function(){return N})),n.d(t,"G",(function(){return P})),n.d(t,"x",(function(){return U})),n.d(t,"s",(function(){return L})),n.d(t,"w",(function(){return _})),n.d(t,"J",(function(){return j})),n.d(t,"v",(function(){return W})),n.d(t,"g",(function(){return J})),n.d(t,"h",(function(){return Q})),n.d(t,"D",(function(){return H})),n.d(t,"N",(function(){return G}));var u="LauncherOpened",o="LauncherMinimized",i="MessengerClosed",r="AttachmentFromUser",D="AttachmentFromAgent",s="AttachmentRemoved",a="AttachmentClicked",c="AttachmentDownloaded",l="FetchedPastMessages",d="DesktopMode",h="MobileMode",f="MessageOnHover",C="MessageOnTouch",p="MessageOnFocus",E="Messenger Open",g="Conversation Setup",F="Conversation Restore",v="Fetching Previous Messages",m="Message RoundTrip",b="Fetch history failed",y="Unable to fetch history",A="Not able to fetch history",k="Unable to restore",S="Message only contains whitespaces",T="Cannot send messages to readOnly session",R="Cannot start conversation.",B="There is already an active conversation.",w="Error on Logout",I="Error on getting WebSocket data.",O="Messenger is already opened.",x="Invalid open command. Should specify supported plugin name.",M="Invalid open command. Should specify plugin name.",N="User is not authenticated",P="Messenger is already closed.",U="Launcher button is already visible",L="Invalid configuration of Launcher button",_="Launcher button is already hidden",j="No configuration is provided to Messenger",W="Error from knowledge component API",J="Messenger autostarted",Q="Autostart first system message",H="Message received out of order",G="SessionCleared"},16:function(e,t,n){"use strict";n.d(t,"o",(function(){return i})),n.d(t,"m",(function(){return r})),n.d(t,"l",(function(){return D})),n.d(t,"n",(function(){return s})),n.d(t,"i",(function(){return a})),n.d(t,"k",(function(){return c})),n.d(t,"h",(function(){return l})),n.d(t,"f",(function(){return d})),n.d(t,"p",(function(){return h})),n.d(t,"a",(function(){return f})),n.d(t,"b",(function(){return C})),n.d(t,"q",(function(){return p})),n.d(t,"e",(function(){return E})),n.d(t,"j",(function(){return g})),n.d(t,"c",(function(){return F})),n.d(t,"g",(function(){return v})),n.d(t,"d",(function(){return m}));var u=n(32),o=n.n(u);function i(){var e={},t=!1,n=0;"boolean"==typeof(arguments.length<=0?void 0:arguments[0])&&(t=arguments.length<=0?void 0:arguments[0],n++);for(var u=function(n){for(var u in n)n.hasOwnProperty(u)&&(t&&"[object Object]"===Object.prototype.toString.call(n[u])?e[u]=i(e[u],n[u]):e[u]=n[u])};n<arguments.length;n++)u(n<0||arguments.length<=n?void 0:arguments[n]);return e}function r(){var e=!1;return window.screen&&(e=window.screen.width>window.screen.height),e}function D(){var e=!1,t=document.getElementById("full-screen-indicator");window.getComputedStyle&&t&&(e="block"===window.getComputedStyle(t).display);return e}function s(){var e,t=!1,n=!1,u=document.getElementById("full-screen-indicator");window.getComputedStyle&&u?n="block"===window.getComputedStyle(u).display:n=!0;return e=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))||/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(e))&&(t=!0),t&&n}function a(){var e,t,n,u=window.navigator.userAgent,o=window.navigator.platform;return/MSIE/.test(u)||/Edge/.test(u)||/Trident\/7\./.test(u)?e="Internet Explorer":/Chrome/.test(u)?(/CrOS/.test(u)&&(o="CrOS"),e="Chrome"):/Opera/.test(u)?e="Opera":/Firefox/.test(u)?e="Firefox":/Safari/.test(u)?(e="Safari",(/iPhone/.test(u)||/iPad/.test(u)||/iPod/.test(u))&&(t="iOS",/FxiOS/.test(u)?e="Firefox":/CriOS/.test(u)&&(e="Chrome"))):/Android/.test(u)&&(e="Android Webkit Browser",(n=/Android\s[\.\d]+/.exec(u)||[]).length&&(t=n[0])),"MacIntel"===o||"MacPPC"===o?t="Mac OS X":"CrOS"===o?t="ChromeOS":"Win32"===o||"Win64"==o?t="Windows":!t&&/Android/.test(u)?t="Android":!t&&/Linux/.test(o)?t="Linux":!t&&/Windows/.test(u)&&(t="Windows"),{browser:e||"",os:t||""}}function c(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}))}function l(){var e=navigator.languages&&navigator.languages[0]||navigator.language||navigator.userLanguage;return e&&"string"==typeof e?e.toLowerCase():""}function d(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;if(0===e)return"0 Bytes";var n=1e3,u=t<0?0:t,o=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],i=Math.floor(Math.log(e)/Math.log(n));return parseFloat((e/Math.pow(n,i)).toFixed(u))+" "+o[i]}function h(e,t){var n=e.indexOf(t);return-1!==n&&e.splice(n,1),e}var f={"en-us":"en",cs:"cs",da:"da",de:"de",es:"es",fi:"fi",it:"it",ko:"ko",nl:"nl",no:"nb",pl:"pl","pt-br":"pt-BR",ru:"ru",sv:"sv",th:"th",tr:"tr","zh-cn":"zh-CN","zh-tw":"zh-TW",fr:"fr",ja:"ja",ar:"ar",he:"he","pt-pt":"pt-PT"},C={"conversations.home":{showHeaderTitle:!0,showHeaderSubTitle:!0,expandHeader:!0,backButton:!1,deleteButton:!1,closeButton:!1},"conversations.conversations":{showHeaderTitle:!0,showHeaderSubTitle:!1,expandHeader:!1,backButton:!0,deleteButton:!0,closeButton:!1},"knowledge.search":{showHeaderTitle:!1,showHeaderSubTitle:!1,expandHeader:!1,backButton:!0,deleteButton:!1,closeButton:!1},"knowledge.article":{showHeaderTitle:!1,showHeaderSubTitle:!1,expandHeader:!1,backButton:!0,deleteButton:!1,closeButton:!1},"knowledge.category":{showHeaderTitle:!1,showHeaderSubTitle:!1,expandHeader:!1,backButton:!0,deleteButton:!1,closeButton:!1},"conversations.filePreview":{showHeaderTitle:!0,showHeaderSubTitle:!1,expandHeader:!1,backButton:!0,deleteButton:!0,closeButton:!1}};function p(e,t){var n={text:e,truncated:!1};return e.length>t&&(n.text=e.slice(0,t)+"...",n.truncated=!0),n}function E(){return/^(\uD83C\uDFF4\uDB40\uDC67\uDB40\uDC62(?:\uDB40\uDC65\uDB40\uDC6E\uDB40\uDC67|\uDB40\uDC73\uDB40\uDC63\uDB40\uDC74|\uDB40\uDC77\uDB40\uDC6C\uDB40\uDC73)\uDB40\uDC7F|\uD83D\uDC68(?:\uD83C\uDFFC\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68\uD83C\uDFFB|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFF\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFE])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFE\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFD])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFD\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB\uDFFC])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\u200D(?:\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83D\uDC68|(?:\uD83D[\uDC68\uDC69])\u200D(?:\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67]))|\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|(?:\uD83D[\uDC68\uDC69])\u200D(?:\uD83D[\uDC66\uDC67])|[\u2695\u2696\u2708]\uFE0F|\uD83D[\uDC66\uDC67]|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|(?:\uD83C\uDFFB\u200D[\u2695\u2696\u2708]|\uD83C\uDFFF\u200D[\u2695\u2696\u2708]|\uD83C\uDFFE\u200D[\u2695\u2696\u2708]|\uD83C\uDFFD\u200D[\u2695\u2696\u2708]|\uD83C\uDFFC\u200D[\u2695\u2696\u2708])\uFE0F|\uD83C\uDFFB\u200D(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C[\uDFFB-\uDFFF])|(?:\uD83E\uDDD1\uD83C\uDFFB\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFC\u200D\uD83E\uDD1D\u200D\uD83D\uDC69)\uD83C\uDFFB|\uD83E\uDDD1(?:\uD83C\uDFFF\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1(?:\uD83C[\uDFFB-\uDFFF])|\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1)|(?:\uD83E\uDDD1\uD83C\uDFFE\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFF\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69]))(?:\uD83C[\uDFFB-\uDFFE])|(?:\uD83E\uDDD1\uD83C\uDFFC\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFD\u200D\uD83E\uDD1D\u200D\uD83D\uDC69)(?:\uD83C[\uDFFB\uDFFC])|\uD83D\uDC69(?:\uD83C\uDFFE\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFD\uDFFF])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFC\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB\uDFFD-\uDFFF])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFB\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFC-\uDFFF])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFD\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\u200D(?:\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D(?:\uD83D[\uDC68\uDC69])|\uD83D[\uDC68\uDC69])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFF\u200D(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD]))|\uD83D\uDC69\u200D\uD83D\uDC69\u200D(?:\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67]))|(?:\uD83E\uDDD1\uD83C\uDFFD\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFE\u200D\uD83E\uDD1D\u200D\uD83D\uDC69)(?:\uD83C[\uDFFB-\uDFFD])|\uD83D\uDC69\u200D\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC69\u200D\uD83D\uDC69\u200D(?:\uD83D[\uDC66\uDC67])|(?:\uD83D\uDC41\uFE0F\u200D\uD83D\uDDE8|\uD83D\uDC69(?:\uD83C\uDFFF\u200D[\u2695\u2696\u2708]|\uD83C\uDFFE\u200D[\u2695\u2696\u2708]|\uD83C\uDFFC\u200D[\u2695\u2696\u2708]|\uD83C\uDFFB\u200D[\u2695\u2696\u2708]|\uD83C\uDFFD\u200D[\u2695\u2696\u2708]|\u200D[\u2695\u2696\u2708])|(?:(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)\uFE0F|\uD83D\uDC6F|\uD83E[\uDD3C\uDDDE\uDDDF])\u200D[\u2640\u2642]|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642]|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD6-\uDDDD])(?:(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642]|\u200D[\u2640\u2642])|\uD83C\uDFF4\u200D\u2620)\uFE0F|\uD83D\uDC69\u200D\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|\uD83C\uDFF3\uFE0F\u200D\uD83C\uDF08|\uD83D\uDC15\u200D\uD83E\uDDBA|\uD83D\uDC69\u200D\uD83D\uDC66|\uD83D\uDC69\u200D\uD83D\uDC67|\uD83C\uDDFD\uD83C\uDDF0|\uD83C\uDDF4\uD83C\uDDF2|\uD83C\uDDF6\uD83C\uDDE6|[#\*0-9]\uFE0F\u20E3|\uD83C\uDDE7(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEF\uDDF1-\uDDF4\uDDF6-\uDDF9\uDDFB\uDDFC\uDDFE\uDDFF])|\uD83C\uDDF9(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDED\uDDEF-\uDDF4\uDDF7\uDDF9\uDDFB\uDDFC\uDDFF])|\uD83C\uDDEA(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDED\uDDF7-\uDDFA])|\uD83E\uDDD1(?:\uD83C[\uDFFB-\uDFFF])|\uD83C\uDDF7(?:\uD83C[\uDDEA\uDDF4\uDDF8\uDDFA\uDDFC])|\uD83D\uDC69(?:\uD83C[\uDFFB-\uDFFF])|\uD83C\uDDF2(?:\uD83C[\uDDE6\uDDE8-\uDDED\uDDF0-\uDDFF])|\uD83C\uDDE6(?:\uD83C[\uDDE8-\uDDEC\uDDEE\uDDF1\uDDF2\uDDF4\uDDF6-\uDDFA\uDDFC\uDDFD\uDDFF])|\uD83C\uDDF0(?:\uD83C[\uDDEA\uDDEC-\uDDEE\uDDF2\uDDF3\uDDF5\uDDF7\uDDFC\uDDFE\uDDFF])|\uD83C\uDDED(?:\uD83C[\uDDF0\uDDF2\uDDF3\uDDF7\uDDF9\uDDFA])|\uD83C\uDDE9(?:\uD83C[\uDDEA\uDDEC\uDDEF\uDDF0\uDDF2\uDDF4\uDDFF])|\uD83C\uDDFE(?:\uD83C[\uDDEA\uDDF9])|\uD83C\uDDEC(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEE\uDDF1-\uDDF3\uDDF5-\uDDFA\uDDFC\uDDFE])|\uD83C\uDDF8(?:\uD83C[\uDDE6-\uDDEA\uDDEC-\uDDF4\uDDF7-\uDDF9\uDDFB\uDDFD-\uDDFF])|\uD83C\uDDEB(?:\uD83C[\uDDEE-\uDDF0\uDDF2\uDDF4\uDDF7])|\uD83C\uDDF5(?:\uD83C[\uDDE6\uDDEA-\uDDED\uDDF0-\uDDF3\uDDF7-\uDDF9\uDDFC\uDDFE])|\uD83C\uDDFB(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDEE\uDDF3\uDDFA])|\uD83C\uDDF3(?:\uD83C[\uDDE6\uDDE8\uDDEA-\uDDEC\uDDEE\uDDF1\uDDF4\uDDF5\uDDF7\uDDFA\uDDFF])|\uD83C\uDDE8(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDEE\uDDF0-\uDDF5\uDDF7\uDDFA-\uDDFF])|\uD83C\uDDF1(?:\uD83C[\uDDE6-\uDDE8\uDDEE\uDDF0\uDDF7-\uDDFB\uDDFE])|\uD83C\uDDFF(?:\uD83C[\uDDE6\uDDF2\uDDFC])|\uD83C\uDDFC(?:\uD83C[\uDDEB\uDDF8])|\uD83C\uDDFA(?:\uD83C[\uDDE6\uDDEC\uDDF2\uDDF3\uDDF8\uDDFE\uDDFF])|\uD83C\uDDEE(?:\uD83C[\uDDE8-\uDDEA\uDDF1-\uDDF4\uDDF6-\uDDF9])|\uD83C\uDDEF(?:\uD83C[\uDDEA\uDDF2\uDDF4\uDDF5])|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uD83C[\uDFFB-\uDFFF])|(?:[\u261D\u270A-\u270D]|\uD83C[\uDF85\uDFC2\uDFC7]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC6B-\uDC6D\uDC70\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDCAA\uDD74\uDD7A\uDD90\uDD95\uDD96\uDE4C\uDE4F\uDEC0\uDECC]|\uD83E[\uDD0F\uDD18-\uDD1C\uDD1E\uDD1F\uDD30-\uDD36\uDDB5\uDDB6\uDDBB\uDDD2-\uDDD5])(?:\uD83C[\uDFFB-\uDFFF])|(?:[\u231A\u231B\u23E9-\u23EC\u23F0\u23F3\u25FD\u25FE\u2614\u2615\u2648-\u2653\u267F\u2693\u26A1\u26AA\u26AB\u26BD\u26BE\u26C4\u26C5\u26CE\u26D4\u26EA\u26F2\u26F3\u26F5\u26FA\u26FD\u2705\u270A\u270B\u2728\u274C\u274E\u2753-\u2755\u2757\u2795-\u2797\u27B0\u27BF\u2B1B\u2B1C\u2B50\u2B55]|\uD83C[\uDC04\uDCCF\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF7C\uDF7E-\uDF93\uDFA0-\uDFCA\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF4\uDFF8-\uDFFF]|\uD83D[\uDC00-\uDC3E\uDC40\uDC42-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDD7A\uDD95\uDD96\uDDA4\uDDFB-\uDE4F\uDE80-\uDEC5\uDECC\uDED0-\uDED2\uDED5\uDEEB\uDEEC\uDEF4-\uDEFA\uDFE0-\uDFEB]|\uD83E[\uDD0D-\uDD3A\uDD3C-\uDD45\uDD47-\uDD71\uDD73-\uDD76\uDD7A-\uDDA2\uDDA5-\uDDAA\uDDAE-\uDDCA\uDDCD-\uDDFF\uDE70-\uDE73\uDE78-\uDE7A\uDE80-\uDE82\uDE90-\uDE95])|(?:[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u261D\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u267F\u2692-\u2697\u2699\u269B\u269C\u26A0\u26A1\u26AA\u26AB\u26B0\u26B1\u26BD\u26BE\u26C4\u26C5\u26C8\u26CE\u26CF\u26D1\u26D3\u26D4\u26E9\u26EA\u26F0-\u26F5\u26F7-\u26FA\u26FD\u2702\u2705\u2708-\u270D\u270F\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763\u2764\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC04\uDCCF\uDD70\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE02\uDE1A\uDE2F\uDE32-\uDE3A\uDE50\uDE51\uDF00-\uDF21\uDF24-\uDF93\uDF96\uDF97\uDF99-\uDF9B\uDF9E-\uDFF0\uDFF3-\uDFF5\uDFF7-\uDFFF]|\uD83D[\uDC00-\uDCFD\uDCFF-\uDD3D\uDD49-\uDD4E\uDD50-\uDD67\uDD6F\uDD70\uDD73-\uDD7A\uDD87\uDD8A-\uDD8D\uDD90\uDD95\uDD96\uDDA4\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA-\uDE4F\uDE80-\uDEC5\uDECB-\uDED2\uDED5\uDEE0-\uDEE5\uDEE9\uDEEB\uDEEC\uDEF0\uDEF3-\uDEFA\uDFE0-\uDFEB]|\uD83E[\uDD0D-\uDD3A\uDD3C-\uDD45\uDD47-\uDD71\uDD73-\uDD76\uDD7A-\uDDA2\uDDA5-\uDDAA\uDDAE-\uDDCA\uDDCD-\uDDFF\uDE70-\uDE73\uDE78-\uDE7A\uDE80-\uDE82\uDE90-\uDE95])\uFE0F?|(?:[\u261D\u26F9\u270A-\u270D]|\uD83C[\uDF85\uDFC2-\uDFC4\uDFC7\uDFCA-\uDFCC]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66-\uDC78\uDC7C\uDC81-\uDC83\uDC85-\uDC87\uDC8F\uDC91\uDCAA\uDD74\uDD75\uDD7A\uDD90\uDD95\uDD96\uDE45-\uDE47\uDE4B-\uDE4F\uDEA3\uDEB4-\uDEB6\uDEC0\uDECC]|\uD83E[\uDD0F\uDD18-\uDD1F\uDD26\uDD30-\uDD39\uDD3C-\uDD3E\uDDB5\uDDB6\uDDB8\uDDB9\uDDBB\uDDCD-\uDDCF\uDDD1-\uDDDD]))+$/g}function g(e){return e.storage||"LocalStorage"}function F(e,t){var n="";if("video"===e.toLowerCase())n=document.createElement("video").canPlayType(t);else if("audio"===e.toLowerCase()){n=document.createElement("audio").canPlayType(t)}return n}function v(e){var t=e.split("/"),n=o()(t,2),u=n[0],i=n[1];i&&-1!==i.indexOf("vnd.openxmlformats-officedocument.wordprocessingml.")?i="vnd.openxmlformats-officedocument.wordprocessingml.*":i&&-1!==i.indexOf("vnd.openxmlformats-officedocument.presentationml.")?i="vnd.openxmlformats-officedocument.presentationml.*":i&&-1!==i.indexOf("vnd.openxmlformats-officedocument.spreadsheetml.")&&(i="vnd.openxmlformats-officedocument.spreadsheetml.*");return!(u=u.toLowerCase())||"image"!==u&&"audio"!==u&&"video"!==u&&"text"!==u?i&&"pdf"===i?i.toUpperCase():i&&["vnd.openxmlformats-officedocument.wordprocessingml.*","msword","vnd.google-apps.document","vnd.oasis.opendocument.text","vnd.oasis.opendocument.text-master","application/vnd.oasis.opendocument.text-template"].includes(i)?"Document":i&&["vnd.ms-powerpoint","vnd.openxmlformats-officedocument.presentationml.*","vnd.google-apps.presentation","vnd.oasis.opendocument.presentation","vnd.oasis.opendocument.presentation-template"].includes(i)?"Presentation":i&&["vnd.google-apps.spreadsheet","vnd.ms-excel","vnd.openxmlformats-officedocument.spreadsheetml.*","vnd.oasis.opendocument.spreadsheet","vnd.oasis.opendocument.spreadsheet-template"].includes(i)?"Spreadsheet":"File":u.charAt(0).toUpperCase()+u.slice(1)}function m(e){var t=!1;if(["image/jpeg","image/png","image/gif","image/svg+xml"].includes(e))t=!0;else{var n=document.createElement("canvas");n.width=n.height=1,t=null!==n.toDataURL(e).match(e)}return t}},19:function(e,t,n){"use strict";n.r(t),n.d(t,"SEND_MESSAGE",(function(){return u})),n.d(t,"CONFIGURE_SESSION",(function(){return o})),n.d(t,"GET_CONFIGURATION",(function(){return i})),n.d(t,"CONFIGURE_AUTH_SESSION",(function(){return r})),n.d(t,"DELETE_SESSION",(function(){return D})),n.d(t,"HEALTH_CHECK",(function(){return s})),n.d(t,"PLATFORM",(function(){return a})),n.d(t,"SEND_ECHO",(function(){return c})),n.d(t,"TYPING",(function(){return l})),n.d(t,"DURATION_MS",(function(){return d})),n.d(t,"GET_JWT",(function(){return h})),n.d(t,"UNAUTHORIZED",(function(){return f})),n.d(t,"EXPIRY_SESSIONID_SECS",(function(){return C})),n.d(t,"SEND_ATTACHMENT",(function(){return p})),n.d(t,"GET_ATTACHMENT",(function(){return E})),n.d(t,"DELETE_ATTACHMENT",(function(){return g})),n.d(t,"ATTACHMENT",(function(){return F})),n.d(t,"QUICKREPLY",(function(){return v})),n.d(t,"GENERICTEMPLATE",(function(){return m})),n.d(t,"CARD",(function(){return b})),n.d(t,"CAROUSEL",(function(){return y})),n.d(t,"CAROUSEL_TYPE_CARDS",(function(){return A})),n.d(t,"CONTENT_TYPE_QUICKREPLIES",(function(){return k})),n.d(t,"CONTENT_TYPE_CARD",(function(){return S})),n.d(t,"CONTENT_TYPE_CAROUSEL",(function(){return T})),n.d(t,"FILENAMEINVALID",(function(){return R})),n.d(t,"FILENAMETOOLONG",(function(){return B})),n.d(t,"FILEUPLOADUNAVAILABLE",(function(){return w})),n.d(t,"FILETYPEINVALID",(function(){return I})),n.d(t,"FILETOOLARGE",(function(){return O})),n.d(t,"FILESIZEZERO",(function(){return x})),n.d(t,"FILENOTFOUND",(function(){return M})),n.d(t,"FILECONTENTINVALID",(function(){return N})),n.d(t,"EVENT_UPLOAD_SUCCESS",(function(){return P})),n.d(t,"EVENT_DELETE",(function(){return U})),n.d(t,"MESSAGE_LENGTH_EXCEEDED",(function(){return L})),n.d(t,"SESSION_EXPIRED",(function(){return _})),n.d(t,"COBROWSE",(function(){return j})),n.d(t,"DISCONNECT_EVENT",(function(){return W})),n.d(t,"PRESENCE_EVENT_TYPE",(function(){return J})),n.d(t,"DISCONNECT_TYPE_READONLY",(function(){return Q})),n.d(t,"JOIN_EVENT",(function(){return H})),n.d(t,"ALLOWED_MIME_TYPE",(function(){return G}));var u="onMessage",o="configureSession",i="getConfiguration",r="configureAuthenticatedSession",D="closeSession",s="healthCheck",a="WebMessaging",c="echo",l="Typing",d=5e3,h="getJwt",f="unauthorized",C=31536e3,p="onAttachment",E="getAttachment",g="deleteAttachment",F="Attachment",v="QuickReply",m="GenericTemplate",b="Card",y="Carousel",A="Cards",k="quick-replies",S="card",T="carousel",R="fileNameInvalid",B="fileNameTooLong",w="FileUploadUnavailable",I="fileTypeInvalid",O="fileTooLarge",x="fileSizeZero",M="FileNotFound",N="fileContentInvalid",P="UploadSuccessEvent",U="AttachmentDeletedResponse",L="messageLengthExceeded",_="SessionExpired",j="CoBrowse",W="Disconnect",J="Presence",Q="readonly",H="Join",G=["image/"]},216:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var u=n(14),o=window.newrelic||{},i=o&&Object.keys(o).length;function r(){return{messengerOpen:function(){if(i)return o.interaction().setName(u.K).save()},conversationSetup:function(){if(i)return o.interaction().setName(u.j).save()},conversationRestore:function(){if(i)return o.interaction().setName(u.i).save()},fetchPreviousMessages:function(){if(i)return o.interaction().setName(u.o).save()},sendMessageRoundTrip:function(){if(i)return o.interaction().setName(u.E).save()},autoStart:function(){if(i)return o.interaction().setName(u.g).save()},autoStartFirstSystemMessage:function(){if(i)return o.interaction().setName(u.h).save()},messageReceivedOutOfOrder:function(){if(i)return o.interaction().setName(u.D).save()},sessionCleared:function(){if(i)return o.interaction().setName(u.N).save()}}}},230:function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},32:function(e,t,n){var u=n(110),o=n(111),i=n(105),r=n(112);e.exports=function(e,t){return u(e)||o(e,t)||i(e,t)||r()},e.exports.__esModule=!0,e.exports.default=e.exports},413:function(e,t,n){(function(n){var u,o,i;o=[],void 0===(i="function"==typeof(u=function(){"use strict";function t(e,t,n){var u=new XMLHttpRequest;u.open("GET",e),u.responseType="blob",u.onload=function(){D(u.response,t,n)},u.onerror=function(){console.error("could not download file")},u.send()}function u(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch(e){}return 200<=t.status&&299>=t.status}function o(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(n){var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var i="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof n&&n.global===n?n:void 0,r=i.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),D=i.saveAs||("object"!=typeof window||window!==i?function(){}:"download"in HTMLAnchorElement.prototype&&!r?function(e,n,r){var D=i.URL||i.webkitURL,s=document.createElement("a");n=n||e.name||"download",s.download=n,s.rel="noopener","string"==typeof e?(s.href=e,s.origin===location.origin?o(s):u(s.href)?t(e,n,r):o(s,s.target="_blank")):(s.href=D.createObjectURL(e),setTimeout((function(){D.revokeObjectURL(s.href)}),4e4),setTimeout((function(){o(s)}),0))}:"msSaveOrOpenBlob"in navigator?function(e,n,i){if(n=n||e.name||"download","string"!=typeof e)navigator.msSaveOrOpenBlob(function(e,t){return void 0===t?t={autoBom:!1}:"object"!=typeof t&&(console.warn("Deprecated: Expected third argument to be a object"),t={autoBom:!t}),t.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob(["\ufeff",e],{type:e.type}):e}(e,i),n);else if(u(e))t(e,n,i);else{var r=document.createElement("a");r.href=e,r.target="_blank",setTimeout((function(){o(r)}))}}:function(e,n,u,o){if((o=o||open("","_blank"))&&(o.document.title=o.document.body.innerText="downloading..."),"string"==typeof e)return t(e,n,u);var D="application/octet-stream"===e.type,s=/constructor/i.test(i.HTMLElement)||i.safari,a=/CriOS\/[\d]+/.test(navigator.userAgent);if((a||D&&s||r)&&"undefined"!=typeof FileReader){var c=new FileReader;c.onloadend=function(){var e=c.result;e=a?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),o?o.location.href=e:location=e,o=null},c.readAsDataURL(e)}else{var l=i.URL||i.webkitURL,d=l.createObjectURL(e);o?o.location=d:location.href=d,o=null,setTimeout((function(){l.revokeObjectURL(d)}),4e4)}});i.saveAs=D.saveAs=D,e.exports=D})?u.apply(t,o):u)||(e.exports=i)}).call(this,n(230))},49:function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e.exports.__esModule=!0,e.exports.default=e.exports},50:function(e,t){function n(e,t){for(var n=0;n<t.length;n++){var u=t[n];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(e,u.key,u)}}e.exports=function(e,t,u){return t&&n(e.prototype,t),u&&n(e,u),Object.defineProperty(e,"prototype",{writable:!1}),e},e.exports.__esModule=!0,e.exports.default=e.exports},52:function(e,t){function n(t){return e.exports=n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,n(t)}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports},537:function(e,t,n){"use strict";n.r(t);var u,o=n(52),i=n.n(o),r=n(49),D=n.n(r),s=n(50),a=n.n(s),c=n(11),l=n.n(c),d=n(413),h=n(16),f=n(216),C=n(19),p=new Uint8Array(16);function E(){if(!u&&!(u="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return u(p)}var g=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var F=function(e){return"string"==typeof e&&g.test(e)},v=[],m=0;m<256;++m)v.push((m+256).toString(16).substr(1));var b=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(v[e[t+0]]+v[e[t+1]]+v[e[t+2]]+v[e[t+3]]+"-"+v[e[t+4]]+v[e[t+5]]+"-"+v[e[t+6]]+v[e[t+7]]+"-"+v[e[t+8]]+v[e[t+9]]+"-"+v[e[t+10]]+v[e[t+11]]+v[e[t+12]]+v[e[t+13]]+v[e[t+14]]+v[e[t+15]]).toLowerCase();if(!F(n))throw TypeError("Stringified UUID is invalid");return n};var y=function(e,t,n){var u=(e=e||{}).random||(e.rng||E)();if(u[6]=15&u[6]|64,u[8]=63&u[8]|128,t){n=n||0;for(var o=0;o<16;++o)t[n+o]=u[o];return t}return b(u)};function A(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);t&&(u=u.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,u)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?A(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):A(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var S={init:function(e){S.transport=e},formattedMessage:function(e){var t=e.text,n=e.type,u=e.channel,o=e.direction,i=e.id,r=e.content,D=e.originatingEntity,s=e.events,a=e.metadata,c=(u||{}).from,l=c||{},d=l.nickname,f=l.image,p={from:c||"",text:t,type:n&&"string"==typeof n?n.toLowerCase():"",id:u&&u.messageId?u.messageId:i,time:u&&u.time?u.time:"",timestamp:u&&u.time?u.time:"",files:[],quickReplies:[],card:{},carousel:{cards:[]},coBrowse:{},messageType:o&&"string"==typeof o?o.toLowerCase():"",originatingEntity:D||""},E=(a||{}).readOnly,g=S.transport;return(d||f)&&(p.from.name=d||"",p.from.avatar=f||""),r&&r.length&&r.forEach((function(e){if(e&&e.contentType==C.ATTACHMENT){var t=e.attachment,n=t.fileSize,u=t.fileName,o=t.filename,i=t.url,r=t.mime,D=t.id,s=t.mediaType;p.files.push({downloadUrl:i,size:n,name:u||o,type:s,mime:r,id:D})}if(e&&e.contentType==C.QUICKREPLY){var a=e.quickReply,c=a.id,l=a.text,d=a.payload,f=a.image,E=a.action;p.contentType=C.CONTENT_TYPE_QUICKREPLIES,p.quickReplies.push({id:c||Object(h.k)(),text:l,payload:d,imageUrl:f,action:E})}if(e&&(e.contentType==C.GENERICTEMPLATE||e.contentType==C.CARD)){var g=e.generic||e.card,F=g.id,v=g.title,m=g.description,b=g.image,y=g.actions,A=g.components,k=g.defaultAction||y,S=A||y;p.contentType=C.CONTENT_TYPE_CARD,p.card={id:F||Object(h.k)(),title:v,description:m,imageUrl:b||"",actions:k,buttons:S}}if(e&&e.contentType==C.CAROUSEL){var T=(e.carousel||{}).cards;p.contentType=C.CONTENT_TYPE_CAROUSEL,T&&T.length&&(p.carouselType=C.CAROUSEL_TYPE_CARDS,T.forEach((function(e){var t=e||{},n=t.id,u=t.title,o=t.description,i=t.image,r=t.actions,D=t.defaultAction;p.carousel.cards.push({id:n||Object(h.k)(),title:u,description:o,imageUrl:i||"",actions:D,buttons:r})})))}})),s&&s.length&&s.forEach((function(t){if(t&&t.eventType==C.COBROWSE){var n=t||{},u=n.id,o=n.coBrowse;p.eventType=C.COBROWSE,p.coBrowse=k({id:u||Object(h.k)()},o)}else if(t&&t.eventType==C.PRESENCE_EVENT_TYPE){var i=((t||{}).presence||{}).type;i&&i==C.DISCONNECT_EVENT&&(g.bConversationDisconnectEvent=!0,g.onConversationDisconnect({originalData:e,data:{readOnly:E?"true"===E.toLowerCase():void 0}})),p.eventType=C.PRESENCE_EVENT_TYPE,p.presence={type:i}}})),p},fileReader:function(e){return new Promise((function(t,n){if(e){var u=new FileReader;u.onload=function(e){t(u.result)},u.readAsArrayBuffer(e)}else n()}))},uploadFile:function(e){var t=S.transport,n=(e.attachmentId,e.url),u=e.headers;e.type;return new Promise((function(e,o){S.fileReader(t.aUploadQueue[0]).then((function(i){var r=(t.aUploadQueue[0]||{}).type;t.uploadRequest({url:n,headers:k(k({},u),{},{"Content-Type":r||"image/png"}),data:i}).then((function(t){e(t)}),(function(e){o(e)})).catch((function(e){o(e)}))}))}))},formatMessages:function(e){var t=e.entities,n=S.transport,u=[];return new Promise((function(e,o){t&&t.length?(t.forEach((function(t,o){t.channel&&t.channel.messageId?t.channel.messageId:t.id;var i=t.channel&&t.channel.time?t.channel.time:t.id,r=(t.content&&t.content[0]?t.content[0]:{}).attachment,D="";if(r&&r.id&&(D=r.id),i&&!n.oMessages[i]&&-1===n.aAttachmentIds.indexOf(D)){n.oMessages[i]=t;var s=S.formattedMessage(t);u.push(s),n.aTransformedMessages.push(s)}0==o&&e(u)})),e(u)):e(u)}))},sanitiseMessage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n={};if(t){var u=e||{},o=u||{},i=o.response,r=o.resource,D=o.requestId,s=o.message;r&&(u={body:{message:s||"",requestId:D||""}});var a=i||u||{},c=a.data,l=a.body,d=a.errorKey,h=c||l||i||u||{},f=h.message,C=h.errorMessage,p=h.errorKey;n={errorName:p||d||"Error",errorMessage:f||C||l||u}}else{var E=e.messageType,g=e.time,F=e.channel,v=e.direction,m=e.originatingEntity,b=e.type,y=g||(F?F.time:null);n={id:e.id,direction:E||v,originatingEntity:m,type:b,time:y}}return n},parseTranscript:function(e,t,n,u){var o=S.transport;if(e&&Object.keys(e).length&&!n){var i=e,r=i.attachmentId,D=i.url,s=i.downloadUrl,a=i.timestamp,c=i.headers,l=(i.type,i.direction),d=i.channel,f=i.id,p=i.content,E=i.events,g=i.metadata,F=c&&!!Object.keys(c).length,v=o.aTransformedMessages.length?o.aTransformedMessages[o.aTransformedMessages.length-1]:"",m=(d&&d.messageId&&d.messageId,d&&d.time?d.time:f);g&&g.id&&g.id;if(v&&t&&t!=C.TYPING&&l&&"Outbound"==l&&d&&d.time)new Date(d.time).getTime()<new Date(v.time).getTime()&&o.onOutofOrderMessageReceived({message:S.sanitiseMessage(e),previousMessage:S.sanitiseMessage(v)});if((r||D)&&F){var b={attachmentId:r,headers:c,uploadURL:D};o.aUploadQueue[0]&&(o.aUploadQueue[0].id=r),o.onUploadApproved(b),S.uploadFile(e).then((function(e){}),(function(e){o.onFileUploadFailed(e)}))}if(r&&D&&!F)if(-1!==o.aGetFileQueue.indexOf(r)){var y=o.aTransformedMessages.filter((function(e,t){var n=JSON.parse(JSON.stringify(e));if(n.files&&n.files[0]&&n.files[0].downloadUrl)return n.files[0].id==r&&(o.aGetFileQueue=[]),n}));y=y.map((function(e){var t=JSON.parse(JSON.stringify(e));return t.files[0].id===r&&(t.files[0].downloadUrl=D,t.files[0].updatedTime=(new Date).toISOString()),t.updatedTime=(new Date).toISOString(),k({},t)}));var A={files:{attachmentId:r,newDownloadUrl:D,updatedTime:(new Date).toISOString()},updatedMessages:y};o.onMessagesUpdated(A),o.onFileReceived({downloadUrl:D,attachmentId:r,timestamp:a})}else if(-1!==o.aRefreshFilesQueue.indexOf(r)){var T=o.aTransformedMessages.filter((function(e,t){var n=JSON.parse(JSON.stringify(e));if(n.files&&n.files[0]&&n.files[0].downloadUrl)return n.files[0].id==r&&(n.files[0].downloadUrl=D,o.aRefreshFilesQueue=Object(h.p)(o.aRefreshFilesQueue,r)),n}));o.onMessagesUpdated({updatedMessages:T})}t==C.EVENT_UPLOAD_SUCCESS&&s?(o.sAttachmentId=r,o.onFileUploaded({downloadUrl:s,attachmentId:r,timestamp:a})):t==C.EVENT_DELETE&&r?-1!==o.aDeleteFileQueue.indexOf(r)&&(Object(h.p)(o.aDeleteFileQueue,r),o.onFileDeleted({attachmentId:r})):E&&E.length?E.forEach((function(t){var n=t||{},u=n.eventType,i=n.typing;if(i&&u&&u==C.TYPING){if("outbound"===l.toLowerCase()){var r=i.duration,D=i.durationMs,s=r||D||C.DURATION_MS;o.clearTypingTimeout(),o.bAgentTypingTimeout=setTimeout((function(){o.clearTypingTimeout(),o.onTypingTimeout()}),s),o.onTypingReceived({typing:i})}}else!u||u!=C.COBROWSE&&u!=C.PRESENCE_EVENT_TYPE||m&&!o.oMessages[m]&&(u==C.PRESENCE_EVENT_TYPE&&(o.sAttachmentId="",o.aUploadQueue=[]),o.oMessages[m]=e,e=S.formattedMessage(e),o.aTransformedMessages.push(e),o.onMessageReceived({messages:e,originalMessages:[o.oMessages[m]]}))})):(p&&p.length&&p.forEach((function(e){var t=e.contentType,n=e.attachment;n&&t&&t==C.ATTACHMENT&&o.sAttachmentId==n.id&&(o.sAttachmentId="",o.aAttachmentIds.push(n.id),o.aUploadQueue=[])})),m&&!o.oMessages[m]&&(o.oMessages[m]=e,e=S.formattedMessage(e),o.aTransformedMessages.push(e),o.onMessageReceived({messages:e,originalMessages:[o.oMessages[m]]})))}if(t)switch(t){case"ConnectionClosedEvent":o.bEnableExponentialTimer&&(o.healthCheckIntervalTimer=32e3),o.bConnectionAutoClosed=!0,o.healthCheckInterval&&(clearInterval(o.healthCheckInterval),o.healthCheckInterval=""),o.onConnectionClosed(),o.pageNumber=1,o.bWebSocket=!1,o.aTransformedMessages=[],o.oMessages={},o.aAttachmentIds=[],o.aUploadQueue=[],o.closeWebSocket({code:-1});break;case"JwtResponse":e&&Object.keys(e).length&&o.pJWTResolve&&o.pJWTResolve(e);break;case"SessionExpiredEvent":o.aUploadQueue=[],o.aTransformedMessages=[],o.oMessages={},o.aAttachmentIds=[],o.oCustomAttributes={},o.healthCheckInterval&&(clearInterval(o.healthCheckInterval),o.healthCheckInterval=""),o.onSessionExpired({errorKey:C.SESSION_EXPIRED}),S.closeWebSocket();break;case"LogoutEvent":o.bLoggedOutEvent=!0,o.bEnableExponentialTimer&&(o.healthCheckIntervalTimer=32e3),o.healthCheckInterval&&(clearInterval(o.healthCheckInterval),o.healthCheckInterval=""),S.resetConversation(),o.aUploadQueue=[],o.bWebSocket=!1,o.closeWebSocket({code:1e3,reason:"logout"});break;case"SessionClearedEvent":S.resetConversation(),o.healthCheckInterval&&(clearInterval(o.healthCheckInterval),o.healthCheckInterval=""),o.bWebSocket=!1,o.onConversationCleared(u),"function"==typeof o.pClearResolve&&(o.pClearResolve(u),o.pClearResolve="")}},buildHistoryURL:function(){return S.transport.config.apiEndpoint+"/api/v2/webmessaging/messages"},mergeHistoryAndWSMessages:function(e,t){var n=[],u=1===e.length&&1===Object.keys(t).length;e&&e.length?Object.keys(t).forEach((function(o){e.every((function(e){return!(e.timestamp!==o||e.timestamp===o&&u)||(n.push(S.formattedMessage(t[o])),!1)}))})):Object.keys(t).reverse().forEach((function(e){n.push(S.formattedMessage(t[e]))}));return n},restoreRequest:function(e){var t=S.transport;return new Promise((function(n,u){var o=S.buildHistoryURL()+"?pageNumber="+t.pageNumber;t.makeRequest({url:o,method:"get",headers:{Authorization:"Bearer ".concat(e)}}).then((function(e){var u=e.data,o=e.status;o&&200===o&&S.formatMessages(u).then((function(e){var o=e;t.pageNumber++,t.oMessages&&Object.keys(t.oMessages).length&&(o=S.mergeHistoryAndWSMessages(e,t.oMessages)),n({messages:o,pageNumber:u.pageNumber,pageSize:u.pageSize})})).catch((function(){}))})).catch((function(e){var n=((e.response||e).data||"").code;n&&-1!==t.httpJWTExpiryCodes.indexOf(n)?t.bSessionActive&&t.onTokenExpired({code:C.UNAUTHORIZED,commandName:"restore",error:e}):u(e)}))}))},handleErrorr:function(e){var t=S.transport;t.bEnableExponentialTimer&&(t.healthCheckIntervalTimer=32e3,t.healthCheck()),t.onError({originalError:e,formattedError:S.sanitiseMessage(e,!0)})},resetHealthCheckInterval:function(){var e=S.transport;if(e.healthCheckIntervalTimer<e.maximumTimerThreshold){var t=Math.round(e.healthCheckIntervalTimer*e.healthCheckMultiplier);e.healthCheckIntervalTimer=t<=e.maximumTimerThreshold?t:e.maximumTimerThreshold}else e.healthCheckIntervalTimer=e.maximumTimerThreshold;e.healthCheck()},resetConversation:function(){var e=S.transport;e.pageNumber=1,e.aTransformedMessages=[],e.oMessages={},e.aAttachmentIds=[],e.aUploadQueue=[]},closeWebSocket:function(){var e=S.transport;e.bCloseSession=!1,e.closeWebSocket({code:1e3,reason:"Close expired session"})},resolveConnectingPromise:function(){var e=S.transport;e.pConnectReject&&(e.pConnectReject(),e.pConnectReject=""),e.pReconnectReject&&(e.pReconnectReject(),e.pReconnectReject="")}};Genesys("registerModule","genesyscloud-messaging-transport",function(){function e(t){D()(this,e),this.bWebSocket=!1,this.bNewConversation=!1,this.bFetchingConfiguration=!1,this.bRestoring=!1,this.bSessionActive=!1,this.bReconnecting=!1,this.connecting=!1,this.bUploading=!1,this.bClosedUnexpectedly=!1,this.bConnectionAutoClosed=!1,this.bLoggedOutEvent=!1,this.bPresenceEvent=!1,this.bReadyToSendJoinEvent=!1,this.bPendingSendJoinEvent=!1,this.oTempJoinEvent="",this.customSettings="",this.bConversationDisconnectEvent=!1,this.bCloseSession=!1,this.bResetConversation=!1,this.oJourneyContext="",this.aMessageQueue=[],this.oLastMessageSent={},this.oMessages={},this.aAttachmentIds=[],this.aTransformedMessages=[],this.aUploadQueue=[],this.aGetFileQueue=[],this.aDeleteFileQueue=[],this.aRefreshFilesQueue=[],this.aAllowedFileTypes=[],this.maxFileSizeKB="",this.sAttachmentId="",this.config={reservedFields:{},mode:0},this.aAuthTokenKeys=["gcatkn","gcartkn"],this.bAuthenticating=!1,this.aUnexpectedSocketCloseCodes=[1013,1012,1011,1010,1009,1007,1006,1005,1001],this.errorCodes={4004:C.FILENAMEINVALID,4005:C.FILENAMETOOLONG,4e3:C.FILEUPLOADUNAVAILABLE,4001:C.FILETYPEINVALID,4002:C.FILETOOLARGE,4003:C.FILECONTENTINVALID,4011:C.MESSAGE_LENGTH_EXCEEDED,4102:C.FILESIZEZERO},this.httpSessionErrorCodes=["not.found","session.not.found","session.expired"],this.httpJWTExpiryCodes=["not.authorized","unauthorized"],this.pageNumber=1,this.constants=C,this.maxMessageSize=4093,t&&"object"==i()(t)&&this.configure(t),this.pConnectResolve="",this.pConnectReject="",this.pReconnectResolve="",this.pReconnectReject="",this.pResetResolve="",this.pResetReject="",this.pRestoreConnectResolve="",this.pAuthRestoreConnectResolve="",this.bRestoreConnectPending=!1,this.bAuthRestoreConnectPending=!1,this.pJWTResolve="",this.pJWTReject="",this.onChatEnded=this.onChatEnded.bind(this),this.healthCheckInterval="",this.healthCheckIntervalTimer=32e3,this.bAgentTypingTimeout=!1,this.bEnableExponentialTimer=!1,this.healthCheckMultiplier=1.2,this.maximumTimerThreshold=3e5,this.nRAutoStartInteraction="",this.nRAutoStartStartTime="",this.nRAutoStartEndTime="",this.oCustomAttributes={},this.bNewSession=!1,this.onWebSocketMessage=this.onWebSocketMessage.bind(this),this.onUploadProgress=this.onUploadProgress.bind(this),this.getWebSocketData=this.getWebSocketData.bind(this),this.closeWebSocket=this.closeWebSocket(this),this.makeRequest=this.makeRequest.bind(this),this.uploadRequest=this.uploadRequest.bind(this),this.cancelRequest=this.cancelRequest.bind(this),this.refreshAuthToken=this.refreshAuthToken.bind(this),this.onLogout=this.onLogout.bind(this),this.getCustomAttributes=this.getCustomAttributes.bind(this),this.nRMessengerPerformaceMetrics=Object(f.a)(),this.pClearResolve="",this.pClearReject="",S.init(this);var n=this;window.addEventListener("beforeunload",(function(e){n.getWebSocketData().then((function(t){if(t.isOpened){var u={token:n.getCustomerJourneyId()||n.config.token,action:"closeSession"};n.sendOverSocket(u),n.healthCheckInterval&&clearInterval(n.healthCheckInterval),n.closeWebSocket({code:-1}),delete e.returnValue}}))}));var u=null;void 0!==document.visible?u="visibilitychange":void 0!==document.msHidden?u="msvisibilitychange":void 0!==document.webkitHidden&&(u="webkitvisibilitychange"),document.addEventListener(u,(function(){var e=(n.config||{}).conversationDisconnect||{},t=e.enabled,u=e.type,o=t&&u&&u.toLowerCase()===C.DISCONNECT_TYPE_READONLY&&n.bConversationDisconnectEvent||!1;"visible"===document.visibilityState?(n.config.authenticated&&n.bConnectionAutoClosed&&(n.bWebSocket||n.getTokens(n.aAuthTokenKeys).then((function(e){e[n.aAuthTokenKeys[0]]&&"undefined"!==e[n.aAuthTokenKeys[0]]||(S.resetConversation(),n.onLogout({implicit:!0}))}))),o&&(n.healthCheckIntervalTimer=32e3,S.resetHealthCheckInterval())):"hidden"===document.visibilityState&&o&&n.healthCheckInterval&&(clearInterval(n.healthCheckInterval),n.healthCheckInterval="")}))}return a()(e,[{key:"configure",value:function(e){if(e&&"object"==i()(e)){var t=e.messagingEndpoint,n=e.apiEndpoint,u=e.deploymentId,o=e.mode,r=e.auth,D=e.email,s=e.phoneNumber,a=e.firstName,c=e.lastName,l=e.version,d=void 0===l?"v1":l,h=e.customProperties,f=e.autoStart,C=e.conversationDisconnect,p=e.conversationClear,E=e.headlessMode,g=(f||{}).enabled;if(t&&"string"==typeof t&&(this.config.endPoint=t+"/"+d+"?deploymentId="+u),n&&"string"==typeof n&&(this.config.apiEndpoint=n),u&&"string"==typeof u&&(this.config.deploymentId=u),o&&"number"==typeof o&&(this.config.mode=o),a&&"string"==typeof a&&(this.config.reservedFields.firstName=a),c&&"string"==typeof c&&(this.config.reservedFields.lastName=c),s&&"string"==typeof s&&(this.config.reservedFields.phoneNumber=s),D&&"string"==typeof D&&(this.config.reservedFields.email=D),h&&"object"==i()(h)&&(this.config.customProperties=h),g&&"boolean"==typeof g&&(this.config.bAutoStartEnabled=g),C&&"object"==i()(C)&&(this.config.conversationDisconnect=C),"boolean"==typeof E&&(this.config.headlessMode=E),r&&"object"==i()(r)){var F=r.enabled;F&&"boolean"==typeof F&&(this.config.authenticated=F,F&&(this.config.mode=2))}p&&"object"==i()(p)&&(this.config.conversationClear=p),this.config.token=y()}}},{key:"sendGetConfiguration",value:function(){var e=this,t=this.config.authenticated;if(e.bWebSocket){var n={deploymentId:e.config.deploymentId,token:e.getCustomerJourneyId()||e.config.token,mode:e.config.mode};if(!t||!0!==t)return n.action=C.GET_CONFIGURATION,e.sendOverSocket(n);e.bAuthenticating=!0,e.getTokens(e.aAuthTokenKeys).then((function(t){return n.action=C.GET_CONFIGURATION,n.data={code:t[e.aAuthTokenKeys[0]]},e.sendOverSocket(n)}))}}},{key:"configureConnection",value:function(e,t){var n=this;t&&(n.customSettings=t);var u=this.config.authenticated;if(n.bWebSocket){var o=k(k({deploymentId:n.config.deploymentId,token:n.getCustomerJourneyId()||n.config.token,mode:n.config.mode},n.config.reservedFields),{},{customProperties:n.config.customFields});if(n.oJourneyContext?o.journeyContext=n.oJourneyContext:o.journeyContext=k(k({},o.journeyContext),n.getJourneyContext()),e&&Object.keys(e).length)(e||{}).startNew&&(o.startNew=!0);if(!u||!0!==u)return o.action=C.CONFIGURE_SESSION,n.sendOverSocket(o);n.bAuthenticating=!0,n.getTokens(n.aAuthTokenKeys).then((function(e){return o.action=C.CONFIGURE_AUTH_SESSION,o.data={code:e[n.aAuthTokenKeys[0]]},n.sendOverSocket(o)}))}}},{key:"onWebSocketMessage",value:function(e){var t=this,n=S.transport,u=(t.oAuthHeadlessSettings||{}).configureOnly,o=n.config,i=o.bAutoStartEnabled,r=o.conversationDisconnect,D=o.authenticated,s=o.headlessMode,a=(r||{}).enabled;if(e){var c=e.code,l=e.message,d=e.body,h=e.class,f=e.type,p=d||{},E=p.errorCode,g=p.newSession,F=p.type,v=p.events,m=p.readOnly,b=p.allowedMedia,y=p.connected,A=E||c,k=(b||{}).inbound||{},T=k.fileTypes,R=k.maxFileSizeKB,B=!1,w=[];if(T&&T.length&&T.forEach((function(e){var t=(e||{}).type;w.push(t)})),w.length&&t.bFetchingConfiguration)return n.aAllowedFileTypes=w,R&&(n.maxFileSizeKB=R),n.onAllowedFileTypesUpdated(d),t.bFetchingConfiguration=!1,t.connecting=!1,n.closeWebSocket({code:1e3,reason:"fetched configuration"}),S.resolveConnectingPromise(),t.bWebSocket=!1,void(t.aMessageQueue.length&&t.sendMessage());d&&h&&"SessionResponse"===h&&"boolean"==typeof y&&!0===y&&(n.aAllowedFileTypes=w,R&&(n.maxFileSizeKB=R),n.onAllowedFileTypesUpdated(d)),t.bNewSession=g,g&&!0===t.bRestoring&&(t.onRestoreFailed(e),t.bRestoring=!1),"boolean"==typeof m&&!0===t.bRestoring&&t.onReadOnlySession({readOnly:m,originalData:e}),g&&(t.bNewConversation=!0,t.bConversationDisconnectEvent=!1),g&&this.bClosedUnexpectedly&&(this.bClosedUnexpectedly=!1,t.aUploadQueue=[],t.onSessionExpired({errorKey:C.SESSION_EXPIRED}));var I=l||d;if(f&&"response"==f&&h&&"StructuredMessage"==h&&(B=!0,t.bEnableExponentialTimer&&A&&200==A&&S.resetHealthCheckInterval()),F&&"Event"==F&&A&&200==A?v&&v.length&&v.forEach((function(e){var u=e||{},o=u.eventType,i=(u.presence||{}).type;if(o&&o==C.PRESENCE_EVENT_TYPE&&i&&i==C.JOIN_EVENT){t.nRAutoStartInteraction=t.nRMessengerPerformaceMetrics.autoStart(),n.onReadyToSend(),t.bPresenceEvent=!0,t.nRAutoStartEndTime=(new Date).getTime();var r=t.nRAutoStartEndTime-t.nRAutoStartStartTime;t.nRAutoStartInteraction&&t.nRAutoStartInteraction.getContext((function(e){e.totalLoadTime=r,t.nRAutoStartInteraction.setAttribute("autoStart",e.totalLoadTime)}))}})):i&&"boolean"==typeof g&&!g&&(t.bPresenceEvent=!0),t.bSessionActive)switch(A){case 200:case 201:case 202:"string"==typeof I&&(I=JSON.parse(I)),S.parseTranscript(I,h,B,e);break;case 500:case 502:case 503:case 504:case 404:t.pJWTReject&&(t.pJWTReject(d),t.pJWTReject=""),S.handleErrorr(e);break;case 403:t.bAuthenticating?(t.pJWTReject&&(t.pJWTReject(d),t.pJWTReject=""),S.handleErrorr(e)):(t.healthCheckInterval&&(clearInterval(t.healthCheckInterval),t.healthCheckInterval=""),t.reAuthenticate());break;case 401:case 400:t.bAuthenticating?(t.bAuthenticating=!1,t.refreshAuthToken().then((function(e){t.connect()})).catch((function(e){}))):(t.pJWTReject&&(t.pJWTReject(d),t.pJWTReject=""),S.handleErrorr(e));case 4004:case 4005:case 4e3:case 4001:case 4002:case 4003:case 4102:t.aUploadQueue=[],e.errorKey=t.errorCodes[A],S.handleErrorr(e);break;case 4006:case 4007:t.aUploadQueue=[],t.aTransformedMessages=[],t.oMessages={},t.aAttachmentIds=[],t.oCustomAttributes={},t.bEnableExponentialTimer&&(t.healthCheckIntervalTimer=32e3),t.healthCheckInterval&&(clearInterval(t.healthCheckInterval),t.healthCheckInterval=""),t.bConversationDisconnectEvent?t.onConversationNotFound(e):t.bConnectionAutoClosed||t.onSessionExpired(e),S.closeWebSocket();break;case 4011:e.errorKey=t.errorCodes[A],S.handleErrorr(e);break;case 4012:t.oLastMessageSent&&Object.keys(t.oLastMessageSent).length&&t.aMessageQueue.push(t.oLastMessageSent),t.oLastMessageSent={},t.connecting||t.connect()}else if(A&&200===A){if(a&&this.bCloseSession&&"boolean"==typeof y&&!y&&(S.closeWebSocket(),this.bResetConversation))return this.bResetConversation=!1,void t.resetConversation();if(t.bSessionActive=!0,t.bAuthenticating=!1,t.bConnectionAutoClosed=!1,t.bLoggedOutEvent=!1,t.bReconnecting)t.bReconnecting=!1,t.onReconnected(e),g&&t.onChatStarted({authenticated:t.config.authenticated,readOnly:m}),t.aMessageQueue.length&&t.sendMessage(),t.aUploadQueue.length&&t.requestFileUpload(),t.aGetFileQueue.length&&t.getFile(),t.aRefreshFilesQueue.length&&t.refreshFiles(),t.aDeleteFileQueue.length&&t.deleteFile(),t.healthCheck();else{if(t.connecting=!1,t.onChatStarted({authenticated:t.config.authenticated,readOnly:m}),g&&i){var O={type:"autoStart"};t.bReadyToSendJoinEvent||(t.bReadyToSendJoinEvent=!0,t.bPendingSendJoinEvent&&(t.sendMessage(t.oTempJoinEvent),t.bPendingSendJoinEvent=!1,t.oTempJoinEvent="",t.onPendingJoinEventSent())),s&&!u?t.sendMessage(O):D||t.sendMessage(O)}t.aMessageQueue.length&&t.sendMessage(),t.aUploadQueue.length&&t.requestFileUpload(),t.aGetFileQueue.length&&t.getFile(),t.aRefreshFilesQueue.length&&t.refreshFiles(),t.aDeleteFileQueue.length&&t.deleteFile(),t.healthCheck()}t.pConnectResolve&&(t.pConnectResolve(d),t.pConnectResolve=""),t.pRestoreConnectResolve&&(t.pRestoreConnectResolve(d),t.pRestoreConnectResolve=""),t.pAuthRestoreConnectResolve&&(t.pAuthRestoreConnectResolve(d),t.pAuthRestoreConnectResolve=""),t.pReconnectResolve&&(t.pReconnectResolve(),t.pReconnectResolve="")}else{switch(A){case 401:t.bAuthenticating&&(t.bAuthenticating=!1,t.refreshAuthToken({restore:!0}).then((function(){})).catch((function(){})));break;case 403:t.bAuthenticating||(t.healthCheckInterval&&(clearInterval(t.healthCheckInterval),t.healthCheckInterval=""),t.reAuthenticate());break;default:t.connecting=!1,t.bReconnecting=!1,t.onError({originalError:e,formattedError:S.sanitiseMessage(e,!0)})}t.pConnectReject&&(t.pConnectReject(),t.pConnectReject=""),t.pReconnectReject&&(t.pReconnectReject(),t.pReconnectReject="")}}}},{key:"onWebSocketError",value:function(e){S.handleErrorr(e)}},{key:"onWebSocketClose",value:function(e){var t=e.code;e.reason;this.bSessionActive=!1,this.bWebSocket=!1,this.bEnableExponentialTimer&&(this.healthCheckIntervalTimer=32e3),this.healthCheckInterval&&(clearInterval(this.healthCheckInterval),this.healthCheckInterval=""),t&&-1!==this.aUnexpectedSocketCloseCodes.indexOf(t)&&!this.bConnectionAutoClosed?(this.bClosedUnexpectedly=!0,this.reconnect()):this.config.authenticated&&(this.bConnectionAutoClosed||(this.bLoggedOutEvent?this.onLogout({implicit:!0}):(S.resetConversation(),this.onLogout(e))))}},{key:"onUploadProgress",value:function(e){var t=e.percentage;e.loaded,e.total;this.bUploading=!0,this.onFileUploading({percentage:t})}},{key:"onChatStarted",value:function(e){}},{key:"onMessageReceived",value:function(e){}},{key:"onTypingReceived",value:function(e){}},{key:"onTypingTimeout",value:function(){}},{key:"onReadyToSend",value:function(){}},{key:"onUploadApproved",value:function(e){}},{key:"onFileUploaded",value:function(){}},{key:"onFileDeleted",value:function(e){}},{key:"onError",value:function(e){}},{key:"onSessionExpired",value:function(e){}},{key:"onChatEnded",value:function(e){}},{key:"onReconnecting",value:function(e){}},{key:"onReconnected",value:function(e){}},{key:"onConnectionClosed",value:function(){}},{key:"onOutofOrderMessageReceived",value:function(){}},{key:"onPendingJoinEventSent",value:function(){}},{key:"openWebSocket",value:function(e){}},{key:"closeWebSocket",value:function(e){}},{key:"sendOverSocket",value:function(e){}},{key:"getWebSocketData",value:function(){}},{key:"makeRequest",value:function(e){}},{key:"uploadRequest",value:function(e){}},{key:"cancelRequest",value:function(){}},{key:"onAllowedFileTypesUpdated",value:function(e){}},{key:"refreshAuthToken",value:function(){}},{key:"reAuthenticate",value:function(){}},{key:"onLogout",value:function(e){}},{key:"getCustomAttributes",value:function(e){}},{key:"getCustomerJourneyId",value:function(){}},{key:"getCustomerSessionId",value:function(){}},{key:"getJourneyContext",value:function(){}},{key:"resetConversation",value:function(){}},{key:"getConfiguration",value:function(e){var t=this.config.endPoint,n=(e||{}).token,u=this;return new Promise((function(o,i){if(n&&(u.config.token=e.token),t&&!u.connecting){u.connecting=!0;try{u.openWebSocket({endPoint:t}).then((function(t){return u.bWebSocket=!0,u.bFetchingConfiguration=!0,o(t),u.sendGetConfiguration(e||{})})).catch((function(e){u.bFetchingConfiguration=!1,u.onError({originalError:e,formattedError:S.sanitiseMessage(e,!0)}),i(e)}))}catch(e){u.onError({originalError:e,formattedError:S.sanitiseMessage(e,!0)}),u.bFetchingConfiguration=!1,u.bWebSocket=!1,i(e)}}else u.onError(),i()}))}},{key:"startConversation",value:function(e,t){var n=this,u=this.config.endPoint,o=(e||{}).journeyContext,i=this;return new Promise((function(r,D){if(i.oJourneyContext=o&&Object.keys(o).length?o:i.getJourneyContext(),e.token&&(i.config.token=e.token),t&&(i.customSettings=t),u&&!i.connecting){i.connecting=!0,i.bNewConversation=!0;try{i.openWebSocket({endPoint:u}).then((function(n){return i.bWebSocket=!0,r(n),i.configureConnection(e||{},t)})).catch((function(e){i.onError({originalError:e,formattedError:S.sanitiseMessage(e,!0)}),D(e)}))}catch(e){i.onError({originalError:e,formattedError:S.sanitiseMessage(e,!0)}),i.bWebSocket=!1,D(e)}}else n.bFetchingConfiguration?(e&&n.aMessageQueue.push(e),r()):(i.onError(),D())}))}},{key:"connect",value:function(){var e=this.config.endPoint,t=this;return new Promise((function(n,u){t.bWebSocket?u({error:"Connection already exists"}):t.connecting?t.bRestoreConnectPending?t.pRestoreConnectResolve||(t.pRestoreConnectResolve=n):t.bAuthRestoreConnectPending?t.pAuthRestoreConnectResolve||(t.pAuthRestoreConnectResolve=n):n():(t.bSessionActive=!1,t.connecting=!0,t.bNewConversation=!1,t.pConnectResolve=n,t.pConnectReject=u,t.openWebSocket({endPoint:e}).then((function(){t.bWebSocket=!0,t.connecting=!1,t.getWebSocketData().then((function(e){e.isOpened&&t.configureConnection()}))})).catch((function(e){t.bWebSocket=!1,t.connecting=!1,t.onError({originalError:e,formattedError:S.sanitiseMessage(e,!0)}),u(e)})))}))}},{key:"reconnect",value:function(e){var t=this.config.endPoint,n=(e||{}).state,u=this,o=!0;return n&&"backOnline"===n&&this.bConnectionAutoClosed&&(o=!1),new Promise((function(e,n){u.pReconnectResolve=e,u.pReconnectReject=n,o?u.getWebSocketData().then((function(o){var i=o.isOpened,r=o.isClosed,D=o.isClosing;i&&(u.onReconnected(),u.healthCheck(),e()),(r||D)&&(u.bSessionActive=!1,u.bReconnecting=!0,u.onReconnecting(),u.openWebSocket({endPoint:t}).then((function(){u.bWebSocket=!0,u.configureConnection(),e()})).catch((function(e){u.connecting=!1,u.bReconnecting=!1,u.bWebSocket=!1,u.onError({originalError:e,formattedError:S.sanitiseMessage(e,!0)}),n&&n(e)})))})):(n("Limited connections are allowed"),u.pReconnectResolve="",u.pReconnectReject="")}))}},{key:"fetchJWT",value:function(){var e=this;return new Promise((function(t,n){e.getJWT().then((function(u){var o=(u||{}).jwt;o&&S.restoreRequest(o).then((function(e){t(e)}),(function(t){clearInterval(e.healthCheckInterval),n(t)}))}),(function(e){n(e)}))}))}},{key:"restore",value:function(e){var t=this,n=(e||{}).type;return this.bNewConversation=!1,this.bRestoring=!0,n&&"backOnline"===n&&S.resetConversation(),new Promise((function(e,n){t.bSessionActive&&t.bWebSocket?e(t.fetchJWT()):(t.bRestoreConnectPending=!0,t.connect().then((function(n){var u=(n||{}).newSession;t.bRestoreConnectPending=!1,"boolean"!=typeof u||u||e(t.fetchJWT())}),(function(e){t.bRestoreConnectPending=!1,t.healthCheckInterval&&(clearInterval(t.healthCheckInterval),t.healthCheckInterval=""),t.onError({originalError:e,formattedError:S.sanitiseMessage(e,!0)})})))}))}},{key:"restoreAuthSession",value:function(e){var t=this;return t.oAuthHeadlessSettings=e,this.bNewConversation=!1,new Promise((function(e,n){t.bSessionActive&&t.bWebSocket?e(t.fetchJWT()):(t.bAuthRestoreConnectPending=!0,t.connect().then((function(n){t.bAuthRestoreConnectPending=!1,(n||{}).newSession?e():e(t.fetchJWT())}),(function(e){t.bAuthRestoreConnectPending=!1,t.healthCheckInterval&&(clearInterval(t.healthCheckInterval),t.healthCheckInterval="")})))}))}},{key:"fetchHistory",value:function(){var e=this;return this.bNewConversation=!1,this.bRestoring=!0,new Promise((function(t,n){e.getJWT().then((function(u){var o=(u||{}).jwt;if(o)if(e.bNewConversation)t();else{var i=S.buildHistoryURL()+"?pageNumber="+e.pageNumber;e.makeRequest({url:i,method:"get",headers:{Authorization:"Bearer ".concat(o)}}).then((function(n){var u=n.data,o=n.status;o&&200===o&&S.formatMessages(u).then((function(n){n&&n.length&&e.pageNumber++,t({messages:n,pageNumber:u.pageNumber,pageSize:u.pageSize})})).catch((function(){}))})).catch((function(t){var u=((t.response||t).data||"").code,o={errorKey:u||""};u&&-1!==e.httpSessionErrorCodes.indexOf(u)&&(o.errorKey=C.SESSION_EXPIRED,e.aUploadQueue=[],e.onSessionExpired(o)),u&&-1!==e.httpJWTExpiryCodes.indexOf(u)?e.bSessionActive&&e.onTokenExpired({code:C.UNAUTHORIZED,commandName:"fetchHistory",error:t}):n("Unable to restore",t)}))}}),(function(t){e.onFetchHistoryFailed(t),n(t)}))}))}},{key:"sendEcho",value:function(e){this.bSessionActive&&!this.bConnectionAutoClosed&&this.sendOverSocket({action:C.SEND_ECHO,message:{type:"Text",text:e&&e.text?e.text:""}})}},{key:"getJWT",value:function(){var e=this;if(e.bSessionActive)return new Promise((function(t,n){e.pJWTResolve=t,e.pJWTReject=n;var u={action:C.GET_JWT,token:e.getCustomerJourneyId()||e.config.token};e.sendOverSocket(u)}))}},{key:"setPendingJoinEvent",value:function(e){this.bPendingSendJoinEvent=!0,this.oTempJoinEvent=e}},{key:"sendMessage",value:function(e){if(this.bWebSocket){var t=this,n=this.sAttachmentId,u=this.aUploadQueue,o=this.config,i=this.bReadyToSendJoinEvent,r=((o||{}).authenticated,(this.customSettings||{}).configureOnly),D=!!n&&u&&u.length&&!u[0].sent;this.bSessionActive?(e&&this.aMessageQueue.push(e),this.aMessageQueue.map((function(e,u){var o=y(),s={action:C.SEND_MESSAGE,token:t.getCustomerJourneyId()||t.config.token,message:{metadata:{id:o}}};if(e&&e.message&&(s.message.type="Text",s.message.text=e.message),D){var a={contentType:"Attachment",attachment:{id:n}};s.message.content=s.message.content||[],s.message.content.push(a)}if(e&&e.type){(e.postback||"").text;var c=("autoStart"!=e.type?Object(h.q)(e.postback.text,t.maxMessageSize):"").text;switch(e.type){case"quickReply":s.message.type="Structured",s.message.text=c,s.message.content=[{contentType:"ButtonResponse",buttonResponse:{type:"QuickReply",text:c,payload:e.postback.payload}}];break;case"autoStart":var l=!1;r?i&&(l=!0):l=!0,l&&(s.message.type="Event",s.message.events=[{eventType:"Presence",presence:{type:"Join"}}]);break;case"card":s.message.type="Structured",s.message.text=c,s.message.content=[{contentType:"ButtonResponse",buttonResponse:{type:"Button",text:c,payload:e.postback.payload}}];break;case"cobrowse":s.message.type="Event",s.message.content=[],s.message.events=[{eventType:"CoBrowse",coBrowse:e.postback.payload}];break;case"clear":s.message.type="Event",s.message.content=[],s.message.events=[{eventType:"Presence",presence:{type:"Clear"}}]}}t.getCustomAttributes().then((function(n){var u=((n||{}).messaging||{}).customAttributes;u&&Object.keys(u).length&&(s.message.channel={metadata:{customAttributes:u}}),e&&e.type&&"autoStart"==e.type&&(t.nRAutoStartStartTime=(new Date).getTime()),(s.message.type||s.message.content)&&t.sendOverSocket(s)})),t.bEnableExponentialTimer&&S.resetHealthCheckInterval(),e&&Object.keys(e).length&&(t.oLastMessageSent=e),u===t.aMessageQueue.length-1&&(t.aMessageQueue=[]),D&&(t.aUploadQueue[0].sent=!0)}))):this.bReconnecting||this.connecting?this.aMessageQueue.push(e):(e&&this.aMessageQueue.push(e),this.reconnect())}else e&&this.aMessageQueue.push(e),this.connecting||this.connect()}},{key:"sendTyping",value:function(){if(this.bWebSocket){var e=S.transport.config.bAutoStartEnabled;if(e&&this.bPresenceEvent||!e)if(this.bSessionActive){var t={action:C.SEND_MESSAGE,token:this.getCustomerJourneyId()||this.config.token,message:{type:"Event",events:[{eventType:"Typing",typing:{type:"On"}}]}};this.sendOverSocket(t),this.bEnableExponentialTimer&&S.resetHealthCheckInterval()}else this.reconnect()}}},{key:"deleteFile",value:function(e){var t=this,n=e.id,u=this;this.aUploadQueue.map((function(e,o){e&&e.id==n&&(u.bWebSocket?u.bSessionActive?(u.aDeleteFileQueue.push(n),u.aUploadQueue.splice(o,1),u.sAttachmentId="",u.bUploading&&(u.bUploading=!1,u.cancelRequest(),u.onFileUploadCancelled(e)),u.aDeleteFileQueue.map((function(e){u.sendOverSocket({action:C.DELETE_ATTACHMENT,token:u.getCustomerJourneyId()||u.config.token,attachmentId:e})}))):t.bReconnecting||t.connecting?t.aDeleteFileQueue.push(n):t.reconnect():(t.aDeleteFileQueue.push(n),t.connect()))}))}},{key:"downloadFile",value:function(e){var t=e||{},n=t.downloadUrl,u=t.name,o=this;return new Promise((function(e,t){if(n&&u)o.makeRequest({url:n,method:"get",responseType:"blob",Pragma:"no-cache",Expires:"0","Cache-Control":"no-cache",responseContentDisposition:"attachment"}).then((function(t){Object(d.saveAs)(new Blob([t.data],{type:t.data.type}),u),e(t)})).catch((function(e){o.onFileDownloadError({error:e});var n=e&&Object.keys(e).length&&e.toJSON()||{};o.onError({originalError:n,formattedError:S.sanitiseMessage(n,!0)}),t(e)}));else{var i="No attachment data available to download";o.onFileDownloadError({error:i}),o.onError({originalError:i,formattedError:S.sanitiseMessage(i,!0)}),t(i)}}))}},{key:"refreshFiles",value:function(e){var t=this,n=this,u=e||this.aRefreshFilesQueue;u&&u.forEach((function(e){var u=(e||{}).id;u&&(t.bWebSocket?t.bSessionActive?(u&&t.aRefreshFilesQueue.push(u),t.aRefreshFilesQueue.map((function(e){n.sendOverSocket({action:C.GET_ATTACHMENT,token:n.getCustomerJourneyId()||n.config.token,attachmentId:e})}))):t.bReconnecting||t.connecting?u&&t.aRefreshFilesQueue.push(u):t.reconnect():(u&&t.aRefreshFilesQueue.push(u),t.connect()))}))}},{key:"getFile",value:function(e){var t=(e||{}).id;if(t)if(this.bWebSocket){var n=this;this.bSessionActive?(t&&this.aGetFileQueue.push(t),this.aGetFileQueue.map((function(e,t){n.sendOverSocket({action:C.GET_ATTACHMENT,token:n.getCustomerJourneyId()||n.config.token,attachmentId:e})}))):this.bReconnecting||this.connecting?t&&this.aGetFileQueue.push(t):this.reconnect()}else t&&this.aGetFileQueue.push(t),this.connect()}},{key:"requestFileUpload",value:function(e){if(this.bWebSocket){var t=this;this.bSessionActive?(e&&(e[0].sent=!1,this.aUploadQueue.push(e[0])),this.aUploadQueue.map((function(e,n){t.sendOverSocket({action:C.SEND_ATTACHMENT,token:t.getCustomerJourneyId()||t.config.token,fileName:e.name,fileType:e.type&&""!==e.type?e.type:"unknown",fileSize:e.size})}))):this.bReconnecting||this.connecting?e&&(e[0].sent=!1,this.aUploadQueue.push(e[0])):this.reconnect()}else e&&(e[0].sent=!1,this.aUploadQueue.push(e[0])),this.connect()}},{key:"endChat",value:function(){if(this.bWebSocket){var e={token:this.getCustomerJourneyId()||this.config.token,action:"closeSession"};this.bNewConversation=!0,clearInterval(this.healthCheckInterval),this.healthCheckInterval="",this.sendOverSocket(e),this.config.authenticated?this.closeWebSocket({code:1e3,reason:"logout"}):this.closeWebSocket()}}},{key:"clearSession",value:function(e){var t=(this.config.conversationDisconnect||{}).enabled,n=(e||{}).resetSession,u=this;if(this.bWebSocket){var o={token:this.getCustomerJourneyId()||this.config.token,action:C.DELETE_SESSION};n&&(this.bResetConversation=!0,o.closeAllConnections=!0),this.bNewConversation=!0,this.bWebSocket=!1,this.bRestoring=!1,this.pageNumber=1,this.oCustomAttributes={},this.bSessionActive=!1,clearInterval(this.healthCheckInterval),this.healthCheckInterval="",this.sendOverSocket(o).then((function(){u.bCloseSession=!0,t||S.closeWebSocket()}))}}},{key:"clearTypingTimeout",value:function(){this.bAgentTypingTimeout&&(clearTimeout(this.bAgentTypingTimeout),this.bAgentTypingTimeout=!1)}},{key:"healthCheck",value:function(){var e=this;clearInterval(this.healthCheckInterval),this.healthCheckInterval="",this.healthCheckInterval=setInterval((function(){e.getWebSocketData().then((function(t){t.isOpened&&e.sendEcho()}))}),this.healthCheckIntervalTimer)}},{key:"clearConversation",value:function(){var e=this.config.conversationClear,t=(e||{}).enabled,n=((e||{}).enabled,this);return new Promise((function(e,u){if(t)if(n.bWebSocket&&n.bSessionActive){n.pClearResolve=e,n.pClearReject=u;var o={action:C.SEND_MESSAGE,token:n.getCustomerJourneyId()||n.config.token,message:{metadata:{id:y()},type:"Event",events:[{eventType:"Presence",presence:{type:"Clear"}}]}};n.sendOverSocket(o)}else u("There is no active conversation found to clear");else u("Please check your conversation clear option is enabled in your configuration")}))}}]),e}())}})}));